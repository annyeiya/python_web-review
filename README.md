# python web-review

## Описание
Проект предоставляет информацию об анимэ (а именно год выпуска, жанр, описание и ссылку для просмотра), информация постоянно обновляется или дополняется.
Ниже приведен пример главной страницы, на ней можно выбрать одно аниме и перейти на страницу с подробной информацией 
![image](https://github.com/annyeiya/python_web-review/assets/150444360/8f251340-5036-4ccf-9a86-26922ef49d42)

- проект выполняет скрапинг сайта: https://animestars.org

## Работа с проектом
- поднятие: 
```
bash build.sh
```
- после остановки нужно выполнить: 
```
docker-compose down
```
- если нужно отчистить базу данных и обнулить количество запусков:
```
cd base; python3 clener_base.py; cd ..
```

## Нюансы:
#### Скрапинг
- При запуске выполняется скрапинг одной страницы сайта.
- Страница для первого скрапинга выбирается в соответствии с номером запуска (если это 1ый запуск - 1я страница, 2ой - 2я, и так далее).
- После, чтобы не было скучно, каждые 3 минуты записи в базе, собранные во время последней работы скрапера, обновляется на данные с рандомно выбранной страницы (на сайте всего 76 страниц).

#### Сервис
- Веб представляет собой мини-сайт на flask на 8000 порту. 
- Все иконки работают и перенаправляют на страницы с подробной информацией о представленных анимэ.
- Порядок расположения данных на сайте соответствует обратному порядку записи данных (т.е. данные с последнего запуска будут сверху, они же будут обновляться).

#### Хранение данных
- Данные хранятся в sqlite. 
- При запуске build.sh создается таблица в базе данных, если еще не существует.
- Также база данных на локальном хосте соединена с базой в докере, поэтому при отключение докера данные в базе остаются.

